#!/bin/bash
source zbx-script-header
### Usage: $0 <zref?> [FLAGS..]
## builds styles

bak=$1;case $1 in
.      ) REF=$(echo "$LOCALREFS" | fzf);shift;;
'' | -*) REF=$(zbx-util-guess-ref);        [ -z "$REF" ] && exit 2        ;;
m*     ) REF=master;shift;;
*      ) REF=$(zbx-util-validate-zref $1); [ -z "$REF" ] && exit 3 ; shift;;
esac

[ ! -d $WORKTREE/$REF/frontends/php ] \
    && >&2 printf "Not a project directory '%s'\nTry: zbx,dev %s\n" $WORKTREE/$REF $bak \
    && exit 3
unset bak

cd $WORKTREE/$REF

docker run -v $PWD:/www talbergs/zbx-box-css-builder
