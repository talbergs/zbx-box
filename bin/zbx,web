#!/bin/bash
### Usage: $0 <zref?> [FLAGS..]
source zbx-script-header
## Shorthand to open browser.
## Usage:
## >$ $0 # to guess
## >$ $0 . # to open fzf menu
## >$ $0 <zref> # to create link

case $1 in
. ) REF=$(echo "$LOCALREFS" | fzf);shift;;
m*) REF=master;shift;;
'') REF=$(zbx-util-guess-ref);;
* ) REF=$(zbx-util-validate-zref $1);shift;;
esac

[ -z $REF ] && exit 1

$BROWSER "${WEBTLD%/}/$(basename $REF)/" &> /dev/null
